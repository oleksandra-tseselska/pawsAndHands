<!DOCTYPE html>
<html lang="en">
<head>
    <!--    this block has all needed initial bootstrap and google fonts imports-->
    <th:block th:insert="~{fragments/head.html :: head}"></th:block>
    <link rel="stylesheet" href="/css/view-user.css">
    <title th:text="${userData?.name} + ' ' +${userData?.surname}+ ' page'"></title>
</head>
<body class="d-flex row">
<!-- this is fragment for header to display -->
<header th:insert="~{fragments/header.html :: header}"></header>

<main>
    <section class="container">
        <div class="row mt-2">

<!--            USER PHOTO  -->

            <div class="col-md-5">
                <img class="view-user-img" alt="user photo" th:src="${userData?.photo}">
            </div>
            <div class="col-md-7 col-lg-5 ms-auto me-auto d-flex flex-column justify-content-center align-self-start">

<!--            USER NAME  -->

                <h2 class="row text-center">
                    <span class="text-capitalize" th:text="${userData?.name} + ' ' + ${userData?.surname}"> </span>
                </h2>
                <ul class="row mt-4 mt-md-0 ps-0 ps-md-4">

<!--            USER INFO  -->

                    <li class="row pb-4">
                        <div class="row">
                            <div class="col-2"><hr></div>
                            <div class="col-4 text-center">
                                <span class="text-muted">about me</span>
                            </div>
                            <div class="col">
                                <hr>
                            </div>
                        </div>
                        <ul class="list-group list-group-flush ms-2">
                            <li class="row" th:if="${!userData.status.isBlank()}">
                                <div class="col-3">
                                    <span class="text-muted">Status:</span>
                                </div>
                                <div class="col">
                                    <span th:text="${userData.status}"></span>
                                </div>
                            </li>
                            <li class="row" th:if="${!userData.country.isBlank() || !userData.city.isBlank()}">
                                <div class="col-3">
                                    <span class="text-muted">Location:</span>
                                </div>
                                <div class="col">
                                    <span th:text="${userData?.country}+', '+${userData?.city}"></span>
                                </div>
                            </li>
                            <!--                    create switcher user wont show it or not-->
                            <li class="row" th:if="${!userData.telephone.isBlank()}">
                                <div class="col-3">
                                    <span class="text-muted">Phone:</span>
                                </div>
                                <div class="col">
                                    <span th:text="${userData?.telephone}"></span>
                                </div>
                            </li>
                            <li class="row" th:if="${!userData.email.isBlank()}">
                                <div class="col-3">
                                    <span class="text-muted">Email:</span>
                                </div>
                                <div class="col">
                                    <span th:text="${userData?.email}"></span>
                                </div>
                            </li>

<!--            BUTTON EDIT IF USER LOG IN  -->

                            <li th:if="${userData.id.equals(userIdFromCookie)}" class="row mt-2 mb-2">
                                <a th:href="'update-profile/'+${userIdFromCookie}" class="btn btn-outline-primary">Edit profile</a>
                            </li>
                        </ul>
                    </li>

<!--            USER PETS INFO  -->

                    <li class="row" th:if="${!userPet.isEmpty()}">
                        <div class="row">
                            <div class="col-2"><hr></div>
                            <div class="col-4 text-center">
                                <span class="text-muted">my paws</span>
                            </div>
                            <div class="col">
                                <hr>
                            </div>
                        </div>
                        <ul class="list-group list-group-flush ms-2">
                            <li class="row pb-4" th:each="petItem: ${userPet}">
                                <h3 class="badge rounded-pill bg-success text-start" style="opacity: 60%; padding-left: 30%" th:text="${petItem.type.toLowerCase()}"></h3>
                                <ul class="list-group list-group-flush ms-2">
                                    <li class="row">
                                        <div class="col">
                                            <span
                                                    class="badge bg-warning text-dark"
                                                    style="opacity: 80%;"
                                                    th:if="${petItem.isLookingForDate()}"
                                            >
                                                ready for a date
                                            </span>
                                        </div>

                                        <div class="col">
                                            <span
                                                    class="badge bg-dark text-white"
                                                    style="opacity: 80%;"
                                                    th:if="${petItem.isDied()}"
                                            >
                                                memorial page
                                            </span>
                                        </div>

                                        <div class="col">
                                            <span
                                                    class="badge bg-info text-dark"
                                                    style="opacity: 80%;"
                                                    th:if="${(petItem.isNewHome())}"
                                            >
                                                looking for a new home
                                            </span>
                                        </div>
                                    </li>
                                    <li class="row" th:if="${!petItem.nickname.isBlank()}">
                                        <div class="col-3">
                                            <span class="text-muted">Nickname:</span>
                                        </div>
                                        <div class="col">
                                            <a th:text="${petItem.nickname}" th:href="@{'/pet-profile/' + ${petItem.getId()}}"></a>
                                        </div>
                                    </li>
                                    <li class="row" th:if="${!petItem.breed.isBlank()}">
                                        <div class="col-3">
                                            <span class="text-muted">Breed:</span>
                                        </div>
                                        <div class="col">
                                            <span th:text="${petItem.breed}"></span>
                                        </div>
                                    </li>

                                    <li class="row" th:if="${!petItem.sex.isBlank()}">
                                        <div class="col-3">
                                            <span class="text-muted">Sex:</span>
                                        </div>
                                        <div class="col">
                                            <span th:text="${petItem.sex}"></span>
                                        </div>
                                    </li>
                                    <li class="row" th:if="${!petItem.birthdate.isBlank()}">
                                        <div class="col-3">
                                            <span class="text-muted">Birthday:</span>
                                        </div>
                                        <div class="col">
                                            <span th:text="${petItem.birthdate}"></span>
                                        </div>
                                    </li>

<!--                EDIT USER LOGIN PET PROFILE-->

                                    <li th:if="${userData.id.equals(userIdFromCookie)}" class="row">
                                        <a type="button"
                                           th:href="@{'/pet-profile/' + ${petItem.id} + '/edit'}"
                                           class="btn btn-outline-primary mt-2 mb-2">Edit pet profile
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </section>
</main>
<footer class="align-self-end" th:insert="~{fragments/footer.html :: footer}"></footer>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</body>
</html>